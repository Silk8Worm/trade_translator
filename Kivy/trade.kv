#:include Kivy/backtest.kv
#:include Kivy/popup.kv

<Trade>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Kivy/Background_Images/trade_screen.jpg'

    FloatLayout:
        size_hint: 1, .99

        canvas.before:
            Color:
                rgba: 0,0,0,.8
            Rectangle:
                pos: self.width/28.5, self.height/26
                size: self.width*.9295154185, self.height*.78

        Label:
            text: 'TRADE TRANSLATOR'
            font_name: 'Kivy/Fonts/DroidSans-Bold'
            size_hint: .55, .1
            font_size: min(self.width/10.404167, self.height/1.066667)
            pos: self.width/2.444444, self.height*8.6

        Label:
            text: 'SIGNAL'
            font_name: 'Kivy/Fonts/Dosis-Light'
            size_hint: .15, .042
            font_size: min(self.width/7.09375, self.height/1.107692)
            pos: self.width*.45, self.height*17.5
            text_size: self.size

        TextInput:
            id: signal
            multiline:True
            font_size: min(self.width/21.410227, self.height/6.545455)
            size_hint: .415, .225
            hint_text: 'Enter signal'
            pos: self.width/6.3, self.height*2.25
            text: root.trade_text
            on_text: root.on_text(self, self.text)

        Label:
            text: 'COVER SIGNAL'
            font_name: 'Kivy/Fonts/Dosis-Light'
            size_hint: .15, .042
            font_size: min(self.width/7.09375, self.height/1.107692)
            pos: self.width*.45, self.height*10.5
            text_size: self.size

        TextInput:
            id: cover_signal
            multiline:True
            font_size: min(self.width/21.410227, self.height/6.545455)
            size_hint: .415, .225
            hint_text: 'Enter cover signal'
            pos: self.width/6.3, self.height*.942
            text: root.cover_text
            on_text: root.on_text(self, self.text)

        Label:
            text: 'UNIVERSE'
            font_name: 'Kivy/Fonts/Dosis-Light'
            size_hint: .15, .042
            font_size: min(self.width/7.09375, self.height/1.107692)
            pos: self.width*3.475, self.height*10.5
            text_size: self.size

        TextInput:
            id: universe
            multiline:True
            font_size: min(self.width/21.410227, self.height/6.545455)
            size_hint: .415, .225
            hint_text: 'Enter comma separated universe'
            pos: self.width*1.250908, self.height*.942
            text: root.universe_text
            on_text: root.on_text(self, self.text)

        Label:
            text: 'TRADE'
            font_name: 'Kivy/Fonts/Dosis-Light'
            size_hint: .15, .042
            font_size: min(self.width/7.09375, self.height/1.107692)
            pos: self.width*3.475, self.height*17.5
            text_size: self.size

        Button:
            text: root.trade
            background_color: (1,1,1,1)
            font_name: 'Kivy/Fonts/DroidSans-Bold'
            size_hint: .13, .06
            font_size: min(self.width/5.675, self.height/1.476923)
            pos: self.width*4.01, self.height*11
            on_release: root.change_trade()
            background_color: .75, .75, .75, 1
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Line:
                    width: 1.5
                    rectangle: self.x, self.y, self.width, self.height

        TextInput:
            id: trade
            hint_text: 'Enter # of shares'
            multiline: False
            font_size: min(self.width/11.35, self.height/1.723077)
            input_filter: 'int'
            size_hint: .26, .07
            pos: self.width*2.593, self.height*9.359

        Label:
            text: 'COVER TRADE'
            font_name: 'Kivy/Fonts/Dosis-Light'
            size_hint: .15, .042
            font_size: min(self.width/7.09375, self.height/1.107692)
            pos: self.width*3.475, self.height*14.2
            text_size: self.size

        Button:
            text: root.cover_trade
            background_color: (1,1,1,1)
            font_name: 'Kivy/Fonts/DroidSans-Bold'
            size_hint: .13, .06
            font_size: min(self.width/5.675, self.height/1.476923)
            pos: self.width*4.01, self.height*8.7
            on_release: root.change_cover_trade()
            background_color: .75, .75, .75, 1
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Line:
                    width: 1.5
                    rectangle: self.x, self.y, self.width, self.height

        TextInput:
            id: cover_trade
            hint_text: 'Enter # of shares'
            multiline: False
            font_size: min(self.width/11.35, self.height/1.723077)
            input_filter: 'int'
            size_hint: .26, .07
            pos: self.width*2.593, self.height*7.385

        Label:
            text: 'TAKE PROFIT'
            font_name: 'Kivy/Fonts/Dosis-Light'
            size_hint: .15, .042
            font_size: min(self.width/7.09375, self.height/1.107692)
            pos: self.width*.45, self.height*3.5
            text_size: self.size

        TextInput:
            id: take_profit
            hint_text: 'Enter percent        '
            multiline: False
            font_size: min(self.width/8.254545, self.height/1.629)
            input_filter: 'float'
            size_hint: .16, .06
            pos: self.width/2.445, self.height*1.4
            halign: 'right'

        Label:
            text: '%'
            size_hint: .02, .06
            font_size: min(self.width/1.031818, self.height/1.745455)
            pos: self.width*11.5, self.height*1.4

        Label:
            text: 'STOP LOSS'
            font_name: 'Kivy/Fonts/Dosis-Light'
            size_hint: .15, .042
            font_size: min(self.width/7.09375, self.height/1.107692)
            pos: self.width*1.845, self.height*3.5
            text_size: self.size

        TextInput:
            id: stop_loss
            hint_text: 'Enter percent        '
            multiline: False
            font_size: min(self.width/8.254545, self.height/1.629)
            input_filter: 'float'
            size_hint: .16, .06
            pos: self.width*1.715, self.height*1.4
            halign: 'right'

        Label:
            text: '%'
            size_hint: .02, .06
            font_size: min(self.width/1.031818, self.height/1.745455)
            pos: self.width*21.94, self.height*1.4

        Button:
            text: 'BACKTEST CASE'
            on_release: root.backtest_case(signal.text, trade.text, cover_signal.text, universe.text, take_profit.text, stop_loss.text, cover_trade.text)
            size_hint: .185, .08
            pos: self.width*2.815, self.height*1.05
            font_name: 'Kivy/Fonts/Dosis-Medium'
            font_size: min(self.width/8.075961, self.height/1.969231)
            background_color: .65, .65, .65, 1
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Line:
                    width: 1.2
                    rectangle: self.x, self.y, self.width, self.height

        Button:
            text: 'BACKTEST'
            on_release: root.backtest(signal.text, trade.text, cover_signal.text, universe.text, take_profit.text, stop_loss.text, cover_trade.text)
            size_hint: .185, .08
            pos: self.width*4.043, self.height*1.05
            font_name: 'Kivy/Fonts/Dosis-Medium'
            font_size: min(self.width/8.075961, self.height/1.969231)
            background_color: .65, .65, .65, 1
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Line:
                    width: 1.2
                    rectangle: self.x, self.y, self.width, self.height

